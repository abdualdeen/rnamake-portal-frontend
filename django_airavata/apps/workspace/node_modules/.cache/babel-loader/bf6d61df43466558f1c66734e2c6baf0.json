{"remainingRequest":"/home/vanishing/git/airavata-django-portal/django_airavata/apps/workspace/node_modules/thread-loader/dist/cjs.js!/home/vanishing/git/airavata-django-portal/django_airavata/apps/workspace/node_modules/babel-loader/lib/index.js!/home/vanishing/git/airavata-django-portal/django_airavata/apps/workspace/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/vanishing/git/airavata-django-portal/django_airavata/apps/workspace/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vanishing/git/airavata-django-portal/django_airavata/apps/workspace/static/django_airavata_workspace/js/components/experiment/ExperimentEditor.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vanishing/git/airavata-django-portal/django_airavata/apps/workspace/static/django_airavata_workspace/js/components/experiment/ExperimentEditor.vue","mtime":1638641844339},{"path":"/home/vanishing/git/airavata-django-portal/django_airavata/apps/workspace/node_modules/cache-loader/dist/cjs.js","mtime":1638646228487},{"path":"/home/vanishing/git/airavata-django-portal/django_airavata/apps/workspace/node_modules/thread-loader/dist/cjs.js","mtime":1638646228889},{"path":"/home/vanishing/git/airavata-django-portal/django_airavata/apps/workspace/node_modules/babel-loader/lib/index.js","mtime":1638646225600},{"path":"/home/vanishing/git/airavata-django-portal/django_airavata/apps/workspace/node_modules/cache-loader/dist/cjs.js","mtime":1638646228487},{"path":"/home/vanishing/git/airavata-django-portal/django_airavata/apps/workspace/node_modules/vue-loader/lib/index.js","mtime":1638646228900}],"contextDependencies":[],"result":["import \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport ComputationalResourceSchedulingEditor from \"./ComputationalResourceSchedulingEditor.vue\";\nimport ExperimentDescriptionEditor from \"./ExperimentDescriptionEditor.vue\";\nimport GroupResourceProfileSelector from \"./GroupResourceProfileSelector.vue\";\nimport InputEditorContainer from \"./input-editors/InputEditorContainer.vue\";\nimport { models, services } from \"django-airavata-api\";\nimport { components, utils } from \"django-airavata-common-ui\";\nexport default {\n  name: \"edit-experiment\",\n  props: {\n    experiment: {\n      type: models.Experiment,\n      required: true\n    },\n    appModule: {\n      type: models.ApplicationModule,\n      required: true\n    }\n  },\n  data: function data() {\n    return {\n      projects: [],\n      localExperiment: this.experiment.clone(),\n      invalidInputs: [],\n      invalidComputationalResourceSchedulingEditor: false,\n      edited: false,\n      saved: false,\n      uploadingInputs: []\n    };\n  },\n  components: {\n    ComputationalResourceSchedulingEditor: ComputationalResourceSchedulingEditor,\n    ExperimentDescriptionEditor: ExperimentDescriptionEditor,\n    GroupResourceProfileSelector: GroupResourceProfileSelector,\n    InputEditorContainer: InputEditorContainer,\n    \"share-button\": components.ShareButton,\n    \"unsaved-changes-guard\": components.UnsavedChangesGuard\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    services.ProjectService.listAll().then(function (projects) {\n      _this.projects = projects;\n\n      if (!_this.localExperiment.projectId) {\n        services.WorkspacePreferencesService.get().then(function (workspacePreferences) {\n          if (!_this.localExperiment.projectId) {\n            _this.localExperiment.projectId = workspacePreferences.most_recent_project_id;\n          }\n        });\n      }\n    });\n  },\n  computed: {\n    sharedProjectOptions: function sharedProjectOptions() {\n      return this.projects.filter(function (p) {\n        return !p.isOwner;\n      }).map(function (project) {\n        return {\n          value: project.projectID,\n          text: project.name + (!project.isOwner ? \" (owned by \" + project.owner + \")\" : \"\")\n        };\n      });\n    },\n    myProjectOptions: function myProjectOptions() {\n      return this.projects.filter(function (p) {\n        return p.isOwner;\n      }).map(function (project) {\n        return {\n          value: project.projectID,\n          text: project.name\n        };\n      });\n    },\n    valid: function valid() {\n      var validation = this.localExperiment.validate();\n      return Object.keys(validation).length === 0 && this.invalidInputs.length === 0 && !this.invalidComputationalResourceSchedulingEditor;\n    },\n    isSaveDisabled: function isSaveDisabled() {\n      return !this.valid || this.hasUploadingInputs;\n    },\n    dirty: function dirty() {\n      return this.edited && !this.saved;\n    },\n    hasUploadingInputs: function hasUploadingInputs() {\n      return this.uploadingInputs.length > 0;\n    }\n  },\n  methods: {\n    saveExperiment: function saveExperiment() {\n      var _this2 = this;\n\n      return this.saveOrUpdateExperiment().then(function (experiment) {\n        _this2.localExperiment = experiment;\n\n        _this2.$emit(\"saved\", experiment);\n      });\n    },\n    saveAndLaunchExperiment: function saveAndLaunchExperiment() {\n      var _this3 = this;\n\n      return this.saveOrUpdateExperiment().then(function (experiment) {\n        _this3.localExperiment = experiment;\n        return services.ExperimentService.launch({\n          lookup: experiment.experimentId\n        }).then(function () {\n          _this3.$emit(\"savedAndLaunched\", experiment);\n        });\n      });\n    },\n    saveOrUpdateExperiment: function saveOrUpdateExperiment() {\n      var _this4 = this;\n\n      if (this.localExperiment.experimentId) {\n        return services.ExperimentService.update({\n          lookup: this.localExperiment.experimentId,\n          data: this.localExperiment\n        }).then(function (experiment) {\n          _this4.saved = true;\n          return experiment;\n        });\n      } else {\n        return services.ExperimentService.create({\n          data: this.localExperiment\n        }).then(function (experiment) {\n          // Can't save sharing settings for a new experiment until it has been\n          // created\n          _this4.saved = true;\n          return _this4.$refs.shareButton.mergeAndSave(experiment.experimentId).then(function () {\n            return experiment;\n          });\n        });\n      }\n    },\n    getValidationFeedback: function getValidationFeedback(properties) {\n      return utils.getProperty(this.localExperiment.validate(), properties);\n    },\n    getValidationState: function getValidationState(properties) {\n      return this.getValidationFeedback(properties) ? \"invalid\" : null;\n    },\n    recordInvalidInputEditorValue: function recordInvalidInputEditorValue(experimentInputName) {\n      if (!this.invalidInputs.includes(experimentInputName)) {\n        this.invalidInputs.push(experimentInputName);\n      }\n    },\n    recordValidInputEditorValue: function recordValidInputEditorValue(experimentInputName) {\n      if (this.invalidInputs.includes(experimentInputName)) {\n        var index = this.invalidInputs.indexOf(experimentInputName);\n        this.invalidInputs.splice(index, 1);\n      }\n    },\n    uploadStart: function uploadStart(experimentInputName) {\n      if (!this.uploadingInputs.includes(experimentInputName)) {\n        this.uploadingInputs.push(experimentInputName);\n      }\n    },\n    uploadEnd: function uploadEnd(experimentInputName) {\n      if (this.uploadingInputs.includes(experimentInputName)) {\n        var index = this.uploadingInputs.indexOf(experimentInputName);\n        this.uploadingInputs.splice(index, 1);\n      }\n    },\n    inputValueChanged: function inputValueChanged() {\n      this.localExperiment.evaluateInputDependencies();\n    }\n  },\n  watch: {\n    experiment: function experiment(newValue) {\n      this.localExperiment = newValue.clone();\n    },\n    localExperiment: {\n      handler: function handler() {\n        this.edited = true;\n      },\n      deep: true\n    }\n  }\n};",{"version":3,"sources":["ExperimentEditor.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <unsaved-changes-guard :dirty=\"dirty\" />\n    <div class=\"row\">\n      <div class=\"col-auto mr-auto\">\n        <h1 class=\"h4 mb-4\">\n          <div\n            v-if=\"appModule\"\n            class=\"application-name text-muted text-uppercase\"\n          >\n            <i class=\"fa fa-code\" aria-hidden=\"true\"></i>\n            {{ appModule.appModuleName }}\n          </div>\n          <slot name=\"title\">Experiment Editor</slot>\n        </h1>\n      </div>\n      <div class=\"col-auto\">\n        <share-button\n          ref=\"shareButton\"\n          :entity-id=\"localExperiment.experimentId\"\n          :entity-label=\"'Experiment'\"\n          :parent-entity-id=\"localExperiment.projectId\"\n          :parent-entity-label=\"'Project'\"\n          :auto-add-default-gateway-users-group=\"false\"\n        />\n      </div>\n    </div>\n    <b-form novalidate>\n      <div class=\"row\">\n        <div class=\"col\">\n          <b-form-group\n            label=\"Experiment Name\"\n            label-for=\"experiment-name\"\n            :feedback=\"getValidationFeedback('experimentName')\"\n            :state=\"getValidationState('experimentName')\"\n          >\n            <b-form-input\n              id=\"experiment-name\"\n              type=\"text\"\n              v-model=\"localExperiment.experimentName\"\n              required\n              placeholder=\"Experiment name\"\n              :state=\"getValidationState('experimentName')\"\n            ></b-form-input>\n          </b-form-group>\n          <experiment-description-editor\n            v-model=\"localExperiment.description\"\n          />\n        </div>\n      </div>\n      <div class=\"row\">\n        <div class=\"col\">\n          <b-form-group\n            label=\"Project\"\n            label-for=\"project\"\n            :feedback=\"getValidationFeedback('projectId')\"\n            :state=\"getValidationState('projectId')\"\n          >\n            <b-form-select\n              id=\"project\"\n              v-model=\"localExperiment.projectId\"\n              required\n              :state=\"getValidationState('projectId')\"\n            >\n              <template slot=\"first\">\n                <option :value=\"null\" disabled>Select a Project</option>\n              </template>\n              <optgroup label=\"My Projects\">\n                <option\n                  v-for=\"project in myProjectOptions\"\n                  :value=\"project.value\"\n                  :key=\"project.value\"\n                >\n                  {{ project.text }}\n                </option>\n              </optgroup>\n              <optgroup label=\"Projects Shared With Me\">\n                <option\n                  v-for=\"project in sharedProjectOptions\"\n                  :value=\"project.value\"\n                  :key=\"project.value\"\n                >\n                  {{ project.text }}\n                </option>\n              </optgroup>\n            </b-form-select>\n          </b-form-group>\n        </div>\n      </div>\n      <div class=\"row\">\n        <div class=\"col\">\n          <h1 class=\"h4 mt-5 mb-4\">Application Configuration</h1>\n        </div>\n      </div>\n      <div class=\"row\">\n        <div class=\"col\">\n          <div class=\"card border-default\">\n            <div class=\"card-body\">\n              <h2 class=\"h6 mb-3\">Application Inputs</h2>\n\n              <transition-group name=\"fade\">\n                <input-editor-container\n                  v-for=\"experimentInput in localExperiment.experimentInputs\"\n                  :experiment-input=\"experimentInput\"\n                  :experiment=\"localExperiment\"\n                  v-model=\"experimentInput.value\"\n                  v-show=\"experimentInput.show\"\n                  :key=\"experimentInput.name\"\n                  @invalid=\"recordInvalidInputEditorValue(experimentInput.name)\"\n                  @valid=\"recordValidInputEditorValue(experimentInput.name)\"\n                  @input=\"inputValueChanged\"\n                  @uploadstart=\"uploadStart(experimentInput.name)\"\n                  @uploadend=\"uploadEnd(experimentInput.name)\"\n                />\n              </transition-group>\n            </div>\n          </div>\n        </div>\n      </div>\n      <group-resource-profile-selector\n        v-model=\"localExperiment.userConfigurationData.groupResourceProfileId\"\n      >\n      </group-resource-profile-selector>\n      <div class=\"row\">\n        <div class=\"col\">\n          <computational-resource-scheduling-editor\n            v-model=\"\n              localExperiment.userConfigurationData\n                .computationalResourceScheduling\n            \"\n            v-if=\"localExperiment.userConfigurationData.groupResourceProfileId\"\n            :app-module-id=\"appModule.appModuleId\"\n            :group-resource-profile-id=\"\n              localExperiment.userConfigurationData.groupResourceProfileId\n            \"\n            @invalid=\"invalidComputationalResourceSchedulingEditor = true\"\n            @valid=\"invalidComputationalResourceSchedulingEditor = false\"\n          >\n          </computational-resource-scheduling-editor>\n        </div>\n      </div>\n      <div class=\"row\">\n        <div class=\"col\">\n          <b-form-group\n            label=\"Email Settings\"\n          >\n            <b-form-checkbox \n              v-model=\"localExperiment.enableEmailNotification\"\n            >\n              Receive email notification of experiment status\n            </b-form-checkbox>\n          </b-form-group>\n        </div>\n      </div>\n      <div class=\"row\">\n        <div id=\"col-exp-buttons\" class=\"col\">\n          <b-button\n            variant=\"success\"\n            @click=\"saveAndLaunchExperiment\"\n            :disabled=\"isSaveDisabled\"\n          >\n            Save and Launch\n          </b-button>\n          <b-button\n            variant=\"primary\"\n            @click=\"saveExperiment\"\n            :disabled=\"isSaveDisabled\"\n          >\n            Save\n          </b-button>\n        </div>\n      </div>\n    </b-form>\n  </div>\n</template>\n\n<script>\nimport ComputationalResourceSchedulingEditor from \"./ComputationalResourceSchedulingEditor.vue\";\nimport ExperimentDescriptionEditor from \"./ExperimentDescriptionEditor.vue\";\nimport GroupResourceProfileSelector from \"./GroupResourceProfileSelector.vue\";\nimport InputEditorContainer from \"./input-editors/InputEditorContainer.vue\";\nimport { models, services } from \"django-airavata-api\";\nimport { components, utils } from \"django-airavata-common-ui\";\n\nexport default {\n  name: \"edit-experiment\",\n  props: {\n    experiment: {\n      type: models.Experiment,\n      required: true,\n    },\n    appModule: {\n      type: models.ApplicationModule,\n      required: true,\n    },\n  },\n  data() {\n    return {\n      projects: [],\n      localExperiment: this.experiment.clone(),\n      invalidInputs: [],\n      invalidComputationalResourceSchedulingEditor: false,\n      edited: false,\n      saved: false,\n      uploadingInputs: [],\n    };\n  },\n  components: {\n    ComputationalResourceSchedulingEditor,\n    ExperimentDescriptionEditor,\n    GroupResourceProfileSelector,\n    InputEditorContainer,\n    \"share-button\": components.ShareButton,\n    \"unsaved-changes-guard\": components.UnsavedChangesGuard,\n  },\n  mounted: function () {\n    services.ProjectService.listAll().then((projects) => {\n      this.projects = projects;\n      if (!this.localExperiment.projectId) {\n        services.WorkspacePreferencesService.get().then(\n          (workspacePreferences) => {\n            if (!this.localExperiment.projectId) {\n              this.localExperiment.projectId =\n                workspacePreferences.most_recent_project_id;\n            }\n          }\n        );\n      }\n    });\n  },\n  computed: {\n    sharedProjectOptions: function () {\n      return this.projects\n        .filter((p) => !p.isOwner)\n        .map((project) => ({\n          value: project.projectID,\n          text:\n            project.name +\n            (!project.isOwner ? \" (owned by \" + project.owner + \")\" : \"\"),\n        }));\n    },\n    myProjectOptions() {\n      return this.projects\n        .filter((p) => p.isOwner)\n        .map((project) => ({\n          value: project.projectID,\n          text: project.name,\n        }));\n    },\n    valid: function () {\n      const validation = this.localExperiment.validate();\n      return (\n        Object.keys(validation).length === 0 &&\n        this.invalidInputs.length === 0 &&\n        !this.invalidComputationalResourceSchedulingEditor\n      );\n    },\n    isSaveDisabled: function () {\n      return !this.valid || this.hasUploadingInputs;\n    },\n    dirty() {\n      return this.edited && !this.saved;\n    },\n    hasUploadingInputs() {\n      return this.uploadingInputs.length > 0;\n    },\n  },\n  methods: {\n    saveExperiment: function () {\n      return this.saveOrUpdateExperiment().then((experiment) => {\n        this.localExperiment = experiment;\n        this.$emit(\"saved\", experiment);\n      });\n    },\n    saveAndLaunchExperiment: function () {\n      return this.saveOrUpdateExperiment().then((experiment) => {\n        this.localExperiment = experiment;\n        return services.ExperimentService.launch({\n          lookup: experiment.experimentId,\n        }).then(() => {\n          this.$emit(\"savedAndLaunched\", experiment);\n        });\n      });\n    },\n    saveOrUpdateExperiment: function () {\n      if (this.localExperiment.experimentId) {\n        return services.ExperimentService.update({\n          lookup: this.localExperiment.experimentId,\n          data: this.localExperiment,\n        }).then((experiment) => {\n          this.saved = true;\n          return experiment;\n        });\n      } else {\n        return services.ExperimentService.create({\n          data: this.localExperiment,\n        }).then((experiment) => {\n          // Can't save sharing settings for a new experiment until it has been\n          // created\n          this.saved = true;\n          return this.$refs.shareButton\n            .mergeAndSave(experiment.experimentId)\n            .then(() => experiment);\n        });\n      }\n    },\n    getValidationFeedback: function (properties) {\n      return utils.getProperty(this.localExperiment.validate(), properties);\n    },\n    getValidationState: function (properties) {\n      return this.getValidationFeedback(properties) ? \"invalid\" : null;\n    },\n    recordInvalidInputEditorValue: function (experimentInputName) {\n      if (!this.invalidInputs.includes(experimentInputName)) {\n        this.invalidInputs.push(experimentInputName);\n      }\n    },\n    recordValidInputEditorValue: function (experimentInputName) {\n      if (this.invalidInputs.includes(experimentInputName)) {\n        const index = this.invalidInputs.indexOf(experimentInputName);\n        this.invalidInputs.splice(index, 1);\n      }\n    },\n    uploadStart(experimentInputName) {\n      if (!this.uploadingInputs.includes(experimentInputName)) {\n        this.uploadingInputs.push(experimentInputName);\n      }\n    },\n    uploadEnd(experimentInputName) {\n      if (this.uploadingInputs.includes(experimentInputName)) {\n        const index = this.uploadingInputs.indexOf(experimentInputName);\n        this.uploadingInputs.splice(index, 1);\n      }\n    },\n    inputValueChanged: function () {\n      this.localExperiment.evaluateInputDependencies();\n    },\n  },\n  watch: {\n    experiment: function (newValue) {\n      this.localExperiment = newValue.clone();\n    },\n    localExperiment: {\n      handler() {\n        this.edited = true;\n      },\n      deep: true,\n    },\n  },\n};\n</script>\n\n<style>\n.application-name {\n  font-size: 12px;\n}\n#col-exp-buttons {\n  text-align: right;\n}\n</style>\n"],"sourceRoot":"static/django_airavata_workspace/js/components/experiment"}]}