{"remainingRequest":"/home/vanishing/git/airavata-django-portal/django_airavata/apps/workspace/node_modules/thread-loader/dist/cjs.js!/home/vanishing/git/airavata-django-portal/django_airavata/apps/workspace/node_modules/babel-loader/lib/index.js!/home/vanishing/git/airavata-django-portal/django_airavata/apps/workspace/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/vanishing/git/airavata-django-portal/django_airavata/apps/workspace/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vanishing/git/airavata-django-portal/django_airavata/apps/workspace/static/django_airavata_workspace/js/containers/DashboardContainer.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vanishing/git/airavata-django-portal/django_airavata/apps/workspace/static/django_airavata_workspace/js/containers/DashboardContainer.vue","mtime":1638641844343},{"path":"/home/vanishing/git/airavata-django-portal/django_airavata/apps/workspace/node_modules/cache-loader/dist/cjs.js","mtime":1638646228487},{"path":"/home/vanishing/git/airavata-django-portal/django_airavata/apps/workspace/node_modules/thread-loader/dist/cjs.js","mtime":1638646228889},{"path":"/home/vanishing/git/airavata-django-portal/django_airavata/apps/workspace/node_modules/babel-loader/lib/index.js","mtime":1638646225600},{"path":"/home/vanishing/git/airavata-django-portal/django_airavata/apps/workspace/node_modules/cache-loader/dist/cjs.js","mtime":1638646228487},{"path":"/home/vanishing/git/airavata-django-portal/django_airavata/apps/workspace/node_modules/vue-loader/lib/index.js","mtime":1638646228900}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.find-index\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { services, session } from \"django-airavata-api\";\nimport { components as comps } from \"django-airavata-common-ui\";\nimport urls from \"../utils/urls\";\nimport PgaLink from \"../components/PgaLink\";\nexport default {\n  name: \"dashboard-container\",\n  data: function data() {\n    return {\n      accessibleAppModules: null,\n      userProfile: null,\n      allApplicationModules: null,\n      workspacePreferences: null\n    };\n  },\n  components: {\n    \"application-card\": comps.ApplicationCard,\n    \"favorite-toggle\": comps.FavoriteToggle,\n    \"pga-link\": PgaLink\n  },\n  methods: {\n    handleAppSelected: function handleAppSelected(appModule) {\n      urls.navigateToCreateExperiment(appModule);\n    },\n    markFavorite: function markFavorite(appModule) {\n      var _this = this;\n\n      services.ApplicationModuleService.favorite({\n        lookup: appModule.appModuleId\n      }).then(function () {\n        return services.WorkspacePreferencesService.get().then(function (prefs) {\n          return _this.workspacePreferences = prefs;\n        });\n      }).then(function () {\n        var index = _this.favoriteApplicationsData.findIndex(function (data) {\n          return data.appModule.appModuleId === appModule.appModuleId;\n        });\n\n        _this.$nextTick(function () {\n          _this.$refs.favoriteApplicationCards[index].$el.scrollIntoView({\n            behavior: \"smooth\",\n            block: \"center\"\n          });\n        });\n      });\n    },\n    markNotFavorite: function markNotFavorite(appModule) {\n      var _this2 = this;\n\n      services.ApplicationModuleService.unfavorite({\n        lookup: appModule.appModuleId\n      }).then(function () {\n        return services.WorkspacePreferencesService.get().then(function (prefs) {\n          return _this2.workspacePreferences = prefs;\n        });\n      });\n    }\n  },\n  computed: {\n    isNewUser: function isNewUser() {\n      return this.userProfile && Date.now() - this.userProfile.creationTime.getTime() < 7 * 24 * 60 * 60 * 1000;\n    },\n    showNewUserMessage: function showNewUserMessage() {\n      return this.isNewUser && this.userProfile && this.accessibleAppModules && this.accessibleAppModules.length === 0;\n    },\n    accessibleModuleIds: function accessibleModuleIds() {\n      return this.accessibleAppModules ? this.accessibleAppModules.map(function (a) {\n        return a.appModuleId;\n      }) : [];\n    },\n    allApplicationData: function allApplicationData() {\n      var _this3 = this;\n\n      return this.allApplicationModules ? this.allApplicationModules.map(function (app) {\n        return {\n          appModule: app,\n          disabled: _this3.accessibleModuleIds.indexOf(app.appModuleId) < 0\n        };\n      }) : [];\n    },\n    favoriteApplicationsData: function favoriteApplicationsData() {\n      var _this4 = this;\n\n      return this.allApplicationData.filter(function (app) {\n        return _this4.favoriteApplicationIds.indexOf(app.appModule.appModuleId) >= 0;\n      });\n    },\n    nonFavoriteApplicationsData: function nonFavoriteApplicationsData() {\n      var _this5 = this;\n\n      return this.allApplicationData.filter(function (app) {\n        return _this5.favoriteApplicationIds.indexOf(app.appModule.appModuleId) < 0;\n      });\n    },\n    favoriteApplicationIds: function favoriteApplicationIds() {\n      if (this.workspacePreferences && this.workspacePreferences.application_preferences) {\n        return this.workspacePreferences.application_preferences.filter(function (p) {\n          return p.favorite;\n        }).map(function (p) {\n          return p.application_id;\n        });\n      } else {\n        return [];\n      }\n    }\n  },\n  beforeMount: function beforeMount() {\n    var _this6 = this;\n\n    services.ApplicationModuleService.list().then(function (result) {\n      return _this6.accessibleAppModules = result;\n    });\n    services.UserProfileService.retrieve({\n      lookup: session.Session.username\n    }).then(function (userProfile) {\n      return _this6.userProfile = userProfile;\n    }); // Load all application, including ones that aren't accessible by this user\n\n    services.ApplicationModuleService.listAll().then(function (result) {\n      return _this6.allApplicationModules = result;\n    });\n    services.WorkspacePreferencesService.get().then(function (prefs) {\n      return _this6.workspacePreferences = prefs;\n    });\n  }\n};",{"version":3,"sources":["DashboardContainer.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <pga-link />\n    <div class=\"row\">\n      <div class=\"col\">\n        <h1 class=\"h4 mb-4\">Dashboard</h1>\n        <h2 class=\"h6 mb-2 text-uppercase text-muted\">Applications</h2>\n      </div>\n    </div>\n    <div class=\"row\" v-if=\"showNewUserMessage\">\n      <div class=\"col\">\n        <b-alert variant=\"info\" show\n          >Welcome {{ userProfile.firstName }} {{ userProfile.lastName }}! You\n          currently don't have access to run any applications but the\n          administrator of this gateway has been notified and will be in contact\n          to grant you the appropriate privileges.</b-alert\n        >\n      </div>\n    </div>\n    <template v-if=\"favoriteApplicationsData.length > 0\">\n      <div class=\"row\">\n        <div class=\"col\">\n          <h1 class=\"h5 mb-2\">Favorites</h1>\n        </div>\n      </div>\n      <div class=\"row\">\n        <application-card\n          v-for=\"item in favoriteApplicationsData\"\n          v-bind:appModule=\"item.appModule\"\n          v-bind:key=\"item.appModule.appModuleId\"\n          @app-selected=\"handleAppSelected\"\n          :disabled=\"item.disabled\"\n          @favorite=\"markFavorite(item.appModule)\"\n          @unfavorite=\"markNotFavorite(item.appModule)\"\n          ref=\"favoriteApplicationCards\"\n        >\n          <favorite-toggle\n            slot=\"card-actions\"\n            :favorite=\"true\"\n            class=\"card-link\"\n            @favorite=\"markFavorite(item.appModule)\"\n            @unfavorite=\"markNotFavorite(item.appModule)\"\n          />\n        </application-card>\n      </div>\n      <hr />\n    </template>\n    <div class=\"row\">\n      <application-card\n        v-for=\"item in nonFavoriteApplicationsData\"\n        v-bind:appModule=\"item.appModule\"\n        v-bind:key=\"item.appModule.appModuleId\"\n        @app-selected=\"handleAppSelected\"\n        :disabled=\"item.disabled\"\n        @favorite=\"markFavorite(item.appModule)\"\n        @unfavorite=\"markNotFavorite(item.appModule)\"\n      >\n        <favorite-toggle\n          slot=\"card-actions\"\n          :favorite=\"false\"\n          class=\"card-link\"\n          @favorite=\"markFavorite(item.appModule)\"\n          @unfavorite=\"markNotFavorite(item.appModule)\"\n        />\n      </application-card>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { services, session } from \"django-airavata-api\";\nimport { components as comps } from \"django-airavata-common-ui\";\nimport urls from \"../utils/urls\";\nimport PgaLink from \"../components/PgaLink\";\n\nexport default {\n  name: \"dashboard-container\",\n  data() {\n    return {\n      accessibleAppModules: null,\n      userProfile: null,\n      allApplicationModules: null,\n      workspacePreferences: null,\n    };\n  },\n  components: {\n    \"application-card\": comps.ApplicationCard,\n    \"favorite-toggle\": comps.FavoriteToggle,\n    \"pga-link\": PgaLink,\n  },\n  methods: {\n    handleAppSelected: function (appModule) {\n      urls.navigateToCreateExperiment(appModule);\n    },\n    markFavorite(appModule) {\n      services.ApplicationModuleService.favorite({\n        lookup: appModule.appModuleId,\n      })\n        .then(() => {\n          return services.WorkspacePreferencesService.get().then(\n            (prefs) => (this.workspacePreferences = prefs)\n          );\n        })\n        .then(() => {\n          const index = this.favoriteApplicationsData.findIndex(\n            (data) => data.appModule.appModuleId === appModule.appModuleId\n          );\n          this.$nextTick(() => {\n            this.$refs.favoriteApplicationCards[index].$el.scrollIntoView({\n              behavior: \"smooth\",\n              block: \"center\",\n            });\n          });\n        });\n    },\n    markNotFavorite(appModule) {\n      services.ApplicationModuleService.unfavorite({\n        lookup: appModule.appModuleId,\n      }).then(() => {\n        return services.WorkspacePreferencesService.get().then(\n          (prefs) => (this.workspacePreferences = prefs)\n        );\n      });\n    },\n  },\n  computed: {\n    isNewUser() {\n      return (\n        this.userProfile &&\n        Date.now() - this.userProfile.creationTime.getTime() <\n          7 * 24 * 60 * 60 * 1000\n      );\n    },\n    showNewUserMessage() {\n      return (\n        this.isNewUser &&\n        this.userProfile &&\n        this.accessibleAppModules &&\n        this.accessibleAppModules.length === 0\n      );\n    },\n    accessibleModuleIds() {\n      return this.accessibleAppModules\n        ? this.accessibleAppModules.map((a) => a.appModuleId)\n        : [];\n    },\n    allApplicationData() {\n      return this.allApplicationModules\n        ? this.allApplicationModules.map((app) => {\n            return {\n              appModule: app,\n              disabled: this.accessibleModuleIds.indexOf(app.appModuleId) < 0,\n            };\n          })\n        : [];\n    },\n    favoriteApplicationsData() {\n      return this.allApplicationData.filter(\n        (app) =>\n          this.favoriteApplicationIds.indexOf(app.appModule.appModuleId) >= 0\n      );\n    },\n    nonFavoriteApplicationsData() {\n      return this.allApplicationData.filter(\n        (app) =>\n          this.favoriteApplicationIds.indexOf(app.appModule.appModuleId) < 0\n      );\n    },\n    favoriteApplicationIds() {\n      if (\n        this.workspacePreferences &&\n        this.workspacePreferences.application_preferences\n      ) {\n        return this.workspacePreferences.application_preferences\n          .filter((p) => p.favorite)\n          .map((p) => p.application_id);\n      } else {\n        return [];\n      }\n    },\n  },\n  beforeMount: function () {\n    services.ApplicationModuleService.list().then(\n      (result) => (this.accessibleAppModules = result)\n    );\n    services.UserProfileService.retrieve({\n      lookup: session.Session.username,\n    }).then((userProfile) => (this.userProfile = userProfile));\n    // Load all application, including ones that aren't accessible by this user\n    services.ApplicationModuleService.listAll().then(\n      (result) => (this.allApplicationModules = result)\n    );\n    services.WorkspacePreferencesService.get().then(\n      (prefs) => (this.workspacePreferences = prefs)\n    );\n  },\n};\n</script>\n"],"sourceRoot":"static/django_airavata_workspace/js/containers"}]}