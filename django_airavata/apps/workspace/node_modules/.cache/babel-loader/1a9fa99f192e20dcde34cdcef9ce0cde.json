{"remainingRequest":"/home/vanishing/git/airavata-django-portal/django_airavata/apps/workspace/node_modules/thread-loader/dist/cjs.js!/home/vanishing/git/airavata-django-portal/django_airavata/apps/workspace/node_modules/babel-loader/lib/index.js!/home/vanishing/git/airavata-django-portal/django_airavata/apps/workspace/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js??ref--13-0!/home/vanishing/git/airavata-django-portal/django_airavata/apps/api/static/django_airavata_api/js/models/DataProduct.js","dependencies":[{"path":"/home/vanishing/git/airavata-django-portal/django_airavata/apps/api/static/django_airavata_api/js/models/DataProduct.js","mtime":1638641844319},{"path":"/home/vanishing/git/airavata-django-portal/django_airavata/apps/workspace/node_modules/cache-loader/dist/cjs.js","mtime":1638646228487},{"path":"/home/vanishing/git/airavata-django-portal/django_airavata/apps/workspace/node_modules/thread-loader/dist/cjs.js","mtime":1638646228889},{"path":"/home/vanishing/git/airavata-django-portal/django_airavata/apps/workspace/node_modules/babel-loader/lib/index.js","mtime":1638646225600},{"path":"/home/vanishing/git/airavata-django-portal/django_airavata/apps/workspace/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js","mtime":1638646227499}],"contextDependencies":[],"result":["import BaseModel from \"./BaseModel\";\nimport DataReplicaLocation from \"./DataReplicaLocation\";\nimport URL from \"url-parse\";\nvar FIELDS = [\"productUri\", \"gatewayId\", \"parentProductUri\", \"productName\", \"productDescription\", \"ownerName\", \"dataProductType\", \"productSize\", {\n  name: \"creationTime\",\n  type: \"date\"\n}, {\n  name: \"lastModifiedTime\",\n  type: \"date\"\n}, \"productMetadata\", {\n  name: \"replicaLocations\",\n  type: DataReplicaLocation,\n  list: true\n}, \"downloadURL\", \"isInputFileUpload\", \"filesize\"];\nvar FILENAME_REGEX = /[^/]+$/;\nvar TEXT_MIME_TYPE_REGEX = /^text\\/.+/;\nvar IMAGE_MIME_TYPE_REGEX = /^image\\/.+/;\nexport default class DataProduct extends BaseModel {\n  constructor() {\n    var data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    super(FIELDS, data);\n  }\n\n  get filename() {\n    if (this.replicaLocations && this.replicaLocations.length > 0) {\n      var firstReplicaLocation = this.replicaLocations[0];\n      var fileURL = new URL(firstReplicaLocation.filePath);\n      var filenameMatch = FILENAME_REGEX.exec(fileURL.pathname);\n\n      if (filenameMatch) {\n        return filenameMatch[0];\n      }\n    }\n\n    return null;\n  }\n\n  get isText() {\n    return this.mimeType && TEXT_MIME_TYPE_REGEX.test(this.mimeType);\n  }\n\n  get isImage() {\n    return this.mimeType && IMAGE_MIME_TYPE_REGEX.test(this.mimeType);\n  }\n\n  get mimeType() {\n    return this.productMetadata && this.productMetadata[\"mime-type\"] ? this.productMetadata[\"mime-type\"] : null;\n  }\n\n}",{"version":3,"sources":["/home/vanishing/git/airavata-django-portal/django_airavata/apps/api/static/django_airavata_api/js/models/DataProduct.js"],"names":["BaseModel","DataReplicaLocation","URL","FIELDS","name","type","list","FILENAME_REGEX","TEXT_MIME_TYPE_REGEX","IMAGE_MIME_TYPE_REGEX","DataProduct","constructor","data","filename","replicaLocations","length","firstReplicaLocation","fileURL","filePath","filenameMatch","exec","pathname","isText","mimeType","test","isImage","productMetadata"],"mappings":"AAAA,OAAOA,SAAP;AACA,OAAOC,mBAAP;AAEA,OAAOC,GAAP,MAAgB,WAAhB;AAEA,IAAMC,MAAM,GAAG,CACb,YADa,EAEb,WAFa,EAGb,kBAHa,EAIb,aAJa,EAKb,oBALa,EAMb,WANa,EAOb,iBAPa,EAQb,aARa,EASb;AACEC,EAAAA,IAAI,EAAE,cADR;AAEEC,EAAAA,IAAI,EAAE;AAFR,CATa,EAab;AACED,EAAAA,IAAI,EAAE,kBADR;AAEEC,EAAAA,IAAI,EAAE;AAFR,CAba,EAiBb,iBAjBa,EAkBb;AACED,EAAAA,IAAI,EAAE,kBADR;AAEEC,EAAAA,IAAI,EAAEJ,mBAFR;AAGEK,EAAAA,IAAI,EAAE;AAHR,CAlBa,EAuBb,aAvBa,EAwBb,mBAxBa,EAyBb,UAzBa,CAAf;AA4BA,IAAMC,cAAc,GAAG,QAAvB;AACA,IAAMC,oBAAoB,GAAG,WAA7B;AACA,IAAMC,qBAAqB,GAAG,YAA9B;AAEA,eAAe,MAAMC,WAAN,SAA0BV,SAA1B,CAAoC;AACjDW,EAAAA,WAAW,GAAY;AAAA,QAAXC,IAAW,uEAAJ,EAAI;AACrB,UAAMT,MAAN,EAAcS,IAAd;AACD;;AAED,MAAIC,QAAJ,GAAe;AACb,QAAI,KAAKC,gBAAL,IAAyB,KAAKA,gBAAL,CAAsBC,MAAtB,GAA+B,CAA5D,EAA+D;AAC7D,UAAMC,oBAAoB,GAAG,KAAKF,gBAAL,CAAsB,CAAtB,CAA7B;AACA,UAAMG,OAAO,GAAG,IAAIf,GAAJ,CAAQc,oBAAoB,CAACE,QAA7B,CAAhB;AACA,UAAMC,aAAa,GAAGZ,cAAc,CAACa,IAAf,CAAoBH,OAAO,CAACI,QAA5B,CAAtB;;AACA,UAAIF,aAAJ,EAAmB;AACjB,eAAOA,aAAa,CAAC,CAAD,CAApB;AACD;AACF;;AACD,WAAO,IAAP;AACD;;AAED,MAAIG,MAAJ,GAAa;AACX,WAAO,KAAKC,QAAL,IAAiBf,oBAAoB,CAACgB,IAArB,CAA0B,KAAKD,QAA/B,CAAxB;AACD;;AAED,MAAIE,OAAJ,GAAc;AACZ,WAAO,KAAKF,QAAL,IAAiBd,qBAAqB,CAACe,IAAtB,CAA2B,KAAKD,QAAhC,CAAxB;AACD;;AAED,MAAIA,QAAJ,GAAe;AACb,WAAO,KAAKG,eAAL,IAAwB,KAAKA,eAAL,CAAqB,WAArB,CAAxB,GACH,KAAKA,eAAL,CAAqB,WAArB,CADG,GAEH,IAFJ;AAGD;;AA7BgD","sourcesContent":["import BaseModel from \"./BaseModel\";\nimport DataReplicaLocation from \"./DataReplicaLocation\";\n\nimport URL from \"url-parse\";\n\nconst FIELDS = [\n  \"productUri\",\n  \"gatewayId\",\n  \"parentProductUri\",\n  \"productName\",\n  \"productDescription\",\n  \"ownerName\",\n  \"dataProductType\",\n  \"productSize\",\n  {\n    name: \"creationTime\",\n    type: \"date\",\n  },\n  {\n    name: \"lastModifiedTime\",\n    type: \"date\",\n  },\n  \"productMetadata\",\n  {\n    name: \"replicaLocations\",\n    type: DataReplicaLocation,\n    list: true,\n  },\n  \"downloadURL\",\n  \"isInputFileUpload\",\n  \"filesize\",\n];\n\nconst FILENAME_REGEX = /[^/]+$/;\nconst TEXT_MIME_TYPE_REGEX = /^text\\/.+/;\nconst IMAGE_MIME_TYPE_REGEX = /^image\\/.+/;\n\nexport default class DataProduct extends BaseModel {\n  constructor(data = {}) {\n    super(FIELDS, data);\n  }\n\n  get filename() {\n    if (this.replicaLocations && this.replicaLocations.length > 0) {\n      const firstReplicaLocation = this.replicaLocations[0];\n      const fileURL = new URL(firstReplicaLocation.filePath);\n      const filenameMatch = FILENAME_REGEX.exec(fileURL.pathname);\n      if (filenameMatch) {\n        return filenameMatch[0];\n      }\n    }\n    return null;\n  }\n\n  get isText() {\n    return this.mimeType && TEXT_MIME_TYPE_REGEX.test(this.mimeType);\n  }\n\n  get isImage() {\n    return this.mimeType && IMAGE_MIME_TYPE_REGEX.test(this.mimeType);\n  }\n\n  get mimeType() {\n    return this.productMetadata && this.productMetadata[\"mime-type\"]\n      ? this.productMetadata[\"mime-type\"]\n      : null;\n  }\n}\n"]}]}