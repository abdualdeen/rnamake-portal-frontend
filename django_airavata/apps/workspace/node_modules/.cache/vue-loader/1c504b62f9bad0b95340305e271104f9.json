{"remainingRequest":"/home/vanishing/git/airavata-django-portal/django_airavata/apps/workspace/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vanishing/git/airavata-django-portal/django_airavata/apps/workspace/static/django_airavata_workspace/js/components/experiment/input-editors/MultiFileInputEditor.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vanishing/git/airavata-django-portal/django_airavata/apps/workspace/static/django_airavata_workspace/js/components/experiment/input-editors/MultiFileInputEditor.vue","mtime":1638641844339},{"path":"/home/vanishing/git/airavata-django-portal/django_airavata/apps/workspace/node_modules/cache-loader/dist/cjs.js","mtime":1638646228487},{"path":"/home/vanishing/git/airavata-django-portal/django_airavata/apps/workspace/node_modules/thread-loader/dist/cjs.js","mtime":1638646228889},{"path":"/home/vanishing/git/airavata-django-portal/django_airavata/apps/workspace/node_modules/babel-loader/lib/index.js","mtime":1638646225600},{"path":"/home/vanishing/git/airavata-django-portal/django_airavata/apps/workspace/node_modules/cache-loader/dist/cjs.js","mtime":1638646228487},{"path":"/home/vanishing/git/airavata-django-portal/django_airavata/apps/workspace/node_modules/vue-loader/lib/index.js","mtime":1638646228900}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { InputEditorMixin } from \"django-airavata-workspace-plugin-api\";\nimport FileInputEditor from \"./FileInputEditor.vue\";\nimport InputFileSelector from \"./InputFileSelector\";\n\nexport default {\n  name: \"multi-file-input-editor\",\n  mixins: [InputEditorMixin],\n  props: {\n    value: {\n      type: String,\n    },\n  },\n  components: {\n    FileInputEditor,\n    InputFileSelector,\n  },\n  data() {\n    return {};\n  },\n  computed: {\n    selectedDataProductURIs() {\n      return this.createValueArray(this.value);\n    },\n  },\n  methods: {\n    updatedFile(newValue, dataProductURI) {\n      // Only remove is handled here, input-file-selector handles adding\n      if (!newValue) {\n        this.removeFile(dataProductURI);\n      }\n    },\n    removeFile(dataProductURI) {\n      const index = this.selectedDataProductURIs.findIndex(\n        (u) => u === dataProductURI\n      );\n      const copyDataProductURIs = this.selectedDataProductURIs.slice();\n      copyDataProductURIs.splice(index, 1);\n      this.data = copyDataProductURIs.join(\",\");\n      this.valueChanged();\n    },\n    createValueArray(value) {\n      if (value && typeof value === \"string\") {\n        return value.split(\",\");\n      } else {\n        return [];\n      }\n    },\n    fileSelected(dataProductURI) {\n      const values = this.createValueArray(this.value);\n      values.push(dataProductURI);\n      this.data = values.join(\",\");\n      this.valueChanged();\n    },\n  },\n};\n",{"version":3,"sources":["MultiFileInputEditor.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"MultiFileInputEditor.vue","sourceRoot":"static/django_airavata_workspace/js/components/experiment/input-editors","sourcesContent":["<template>\n  <div>\n    <div\n      class=\"mb-2\"\n      v-for=\"dataProductURI in selectedDataProductURIs\"\n      :key=\"dataProductURI\"\n    >\n      <file-input-editor\n        :value=\"dataProductURI\"\n        :id=\"dataProductURI\"\n        :experiment=\"experiment\"\n        :experiment-input=\"experimentInput\"\n        :read-only=\"readOnly\"\n        @input=\"updatedFile($event, dataProductURI)\"\n      />\n    </div>\n    <input-file-selector\n      v-if=\"!readOnly\"\n      :selectedDataProductURIs=\"selectedDataProductURIs\"\n      @selected=\"fileSelected\"\n      @uploadstart=\"$emit('uploadstart')\"\n      @uploadend=\"$emit('uploadend')\"\n      multiple\n    />\n  </div>\n</template>\n\n<script>\nimport { InputEditorMixin } from \"django-airavata-workspace-plugin-api\";\nimport FileInputEditor from \"./FileInputEditor.vue\";\nimport InputFileSelector from \"./InputFileSelector\";\n\nexport default {\n  name: \"multi-file-input-editor\",\n  mixins: [InputEditorMixin],\n  props: {\n    value: {\n      type: String,\n    },\n  },\n  components: {\n    FileInputEditor,\n    InputFileSelector,\n  },\n  data() {\n    return {};\n  },\n  computed: {\n    selectedDataProductURIs() {\n      return this.createValueArray(this.value);\n    },\n  },\n  methods: {\n    updatedFile(newValue, dataProductURI) {\n      // Only remove is handled here, input-file-selector handles adding\n      if (!newValue) {\n        this.removeFile(dataProductURI);\n      }\n    },\n    removeFile(dataProductURI) {\n      const index = this.selectedDataProductURIs.findIndex(\n        (u) => u === dataProductURI\n      );\n      const copyDataProductURIs = this.selectedDataProductURIs.slice();\n      copyDataProductURIs.splice(index, 1);\n      this.data = copyDataProductURIs.join(\",\");\n      this.valueChanged();\n    },\n    createValueArray(value) {\n      if (value && typeof value === \"string\") {\n        return value.split(\",\");\n      } else {\n        return [];\n      }\n    },\n    fileSelected(dataProductURI) {\n      const values = this.createValueArray(this.value);\n      values.push(dataProductURI);\n      this.data = values.join(\",\");\n      this.valueChanged();\n    },\n  },\n};\n</script>\n"]}]}