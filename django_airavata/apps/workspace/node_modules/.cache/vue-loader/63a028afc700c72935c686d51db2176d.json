{"remainingRequest":"/home/vanishing/git/airavata-django-portal/django_airavata/apps/workspace/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vanishing/git/airavata-django-portal/django_airavata/apps/workspace/static/django_airavata_workspace/js/containers/ExperimentListContainer.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vanishing/git/airavata-django-portal/django_airavata/apps/workspace/static/django_airavata_workspace/js/containers/ExperimentListContainer.vue","mtime":1638641844343},{"path":"/home/vanishing/git/airavata-django-portal/django_airavata/apps/workspace/node_modules/cache-loader/dist/cjs.js","mtime":1638646228487},{"path":"/home/vanishing/git/airavata-django-portal/django_airavata/apps/workspace/node_modules/thread-loader/dist/cjs.js","mtime":1638646228889},{"path":"/home/vanishing/git/airavata-django-portal/django_airavata/apps/workspace/node_modules/babel-loader/lib/index.js","mtime":1638646225600},{"path":"/home/vanishing/git/airavata-django-portal/django_airavata/apps/workspace/node_modules/cache-loader/dist/cjs.js","mtime":1638646228487},{"path":"/home/vanishing/git/airavata-django-portal/django_airavata/apps/workspace/node_modules/vue-loader/lib/index.js","mtime":1638646228900}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { errors, models, services, utils } from \"django-airavata-api\";\nimport { components as comps } from \"django-airavata-common-ui\";\n\nimport moment from \"moment\";\nimport urls from \"../utils/urls\";\n\nexport default {\n  props: [\"initialExperimentsData\"],\n  name: \"experiment-list-container\",\n  data() {\n    return {\n      experimentsPaginator: null,\n      applicationInterfaces: {},\n      search: null,\n      applicationSelect: null,\n      projectSelect: null,\n      dateSelect: null,\n      experimentAttributeSelect: null,\n      experimentStatusSelect: null,\n      appInterfaces: null,\n      projectInterfaces: null,\n      fromDate: null,\n      toDate: null,\n      applicationSelected: false,\n      projectSelected: false,\n      defaultOptionSelected: true,\n      dateConfig: {\n        mode: \"range\",\n        wrap: true,\n        dateFormat: \"Y-m-d\",\n        maxDate: new Date().fp_incr(1),\n      },\n    };\n  },\n  components: {\n    pager: comps.Pager,\n    \"experiment-status-badge\": comps.ExperimentStatusBadge,\n  },\n  methods: {\n    searchExperiments: function () {\n      this.experimentsPaginator = null;\n      this.reloadExperiments();\n    },\n    resetSearch: function () {\n      this.experimentsPaginator = null;\n      this.search = null;\n      this.experimentAttributeSelect = null;\n      this.experimentStatusSelect = null;\n      this.applicationSelect = null;\n      this.projectSelect = null;\n      this.dateSelect = null;\n      this.toDate = null;\n      this.fromDate = null;\n      this.checkSearchOptions();\n      this.reloadExperiments();\n    },\n    reloadExperiments: function () {\n      const searchParams = {};\n      if (this.experimentAttributeSelect) {\n        if (\n          this.experimentAttributeSelect == \"APPLICATION_ID\" &&\n          this.applicationSelect\n        ) {\n          searchParams[\"APPLICATION_ID\"] = this.applicationSelect;\n        } else if (\n          this.experimentAttributeSelect == \"PROJECT_ID\" &&\n          this.projectSelect\n        ) {\n          searchParams[\"PROJECT_ID\"] = this.projectSelect;\n        } else if (this.search) {\n          searchParams[this.experimentAttributeSelect] = this.search;\n        }\n      }\n      if (this.experimentStatusSelect) {\n        if (this.experimentStatusSelect != \"ALL\") {\n          searchParams[\"STATUS\"] = this.experimentStatusSelect;\n        }\n      }\n      if (this.fromDate && this.toDate) {\n        searchParams[\"FROM_DATE\"] = this.fromDate.getTime();\n        searchParams[\"TO_DATE\"] = this.toDate.getTime();\n      }\n\n      services.ExperimentSearchService.list(searchParams).then(\n        (result) => (this.experimentsPaginator = result)\n      );\n    },\n    checkSearchOptions: function () {\n      this.applicationSelected = false;\n      this.projectSelected = false;\n      this.defaultOptionSelected = false;\n      if (this.experimentAttributeSelect == \"APPLICATION_ID\") {\n        this.applicationSelected = true;\n      } else if (this.experimentAttributeSelect == \"PROJECT_ID\") {\n        this.projectSelected = true;\n      } else {\n        this.defaultOptionSelected = true;\n      }\n    },\n    loadApplicationInterfaces: function () {\n      return services.ApplicationInterfaceService.list().then(\n        (appInterfaces) => (this.appInterfaces = appInterfaces)\n      );\n    },\n    loadProjectInterfaces: function () {\n      return services.ProjectService.listAll().then(\n        (projectInterfaces) => (this.projectInterfaces = projectInterfaces)\n      );\n    },\n    dateRangeChanged: function (selectedDates) {\n      [this.fromDate, this.toDate] = selectedDates;\n      if (this.fromDate && this.toDate) {\n        this.reloadExperiments();\n      }\n    },\n    nextExperiments: function () {\n      this.experimentsPaginator.next();\n    },\n    previousExperiments: function () {\n      this.experimentsPaginator.previous();\n    },\n    fromNow: function (date) {\n      return moment(date).fromNow();\n    },\n    editLink: function (experiment) {\n      return urls.editExperiment(experiment);\n    },\n    viewLink: function (experiment) {\n      return urls.viewExperiment(experiment);\n    },\n    applicationName: function (experiment) {\n      if (experiment.executionId in this.applicationInterfaces) {\n        if (\n          this.applicationInterfaces[experiment.executionId] instanceof\n          models.ApplicationInterfaceDefinition\n        ) {\n          return this.applicationInterfaces[experiment.executionId]\n            .applicationName;\n        } else if (\n          this.applicationInterfaces[experiment.executionId] === null\n        ) {\n          return null;\n        }\n      } else {\n        const request = services.ApplicationInterfaceService.retrieve(\n          {\n            lookup: experiment.executionId,\n          },\n          {\n            ignoreErrors: true,\n          }\n        )\n          .then((result) => {\n            this.$set(\n              this.applicationInterfaces,\n              experiment.executionId,\n              result\n            );\n          })\n          .catch((error) => {\n            if (errors.ErrorUtils.isNotFoundError(error)) {\n              this.$set(\n                this.applicationInterfaces,\n                experiment.executionId,\n                null\n              );\n            } else {\n              throw error;\n            }\n          })\n          .catch(utils.FetchUtils.reportError);\n        this.$set(this.applicationInterfaces, experiment.executionId, request);\n      }\n      return \"...\";\n    },\n    clone(experiment) {\n      services.ExperimentService.clone({\n        lookup: experiment.experimentId,\n      }).then((clonedExperiment) => {\n        urls.navigateToEditExperiment(clonedExperiment);\n      });\n    },\n  },\n  computed: {\n    experiments: function () {\n      return this.experimentsPaginator\n        ? this.experimentsPaginator.results\n        : null;\n    },\n    applicationNameOptions() {\n      if (this.appInterfaces) {\n        const options = this.appInterfaces.map((appInterface) => {\n          return {\n            value: appInterface.applicationInterfaceId,\n            text: appInterface.applicationName,\n          };\n        });\n        return utils.StringUtils.sortIgnoreCase(options, (o) => o.text);\n      } else {\n        return [];\n      }\n    },\n    projectNameOptions() {\n      if (this.projectInterfaces) {\n        const options = this.projectInterfaces.map((projectInterface) => {\n          return {\n            value: projectInterface.projectID,\n            text: projectInterface.name,\n          };\n        });\n        return utils.StringUtils.sortIgnoreCase(options, (o) => o.text);\n      } else {\n        return [];\n      }\n    },\n  },\n  beforeMount: function () {\n    this.loadApplicationInterfaces();\n    this.loadProjectInterfaces();\n    services.ExperimentSearchService.list({\n      initialData: this.initialExperimentsData,\n    }).then((result) => (this.experimentsPaginator = result));\n  },\n};\n",{"version":3,"sources":["ExperimentListContainer.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8KA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ExperimentListContainer.vue","sourceRoot":"static/django_airavata_workspace/js/containers","sourcesContent":["<template>\n  <div>\n    <div class=\"row\">\n      <div class=\"col\">\n        <h1 class=\"h4 mb-4\">Browse Experiments</h1>\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col\">\n        <div class=\"card\">\n          <div class=\"card-body\">\n            <b-input-group class=\"w-100 mb-2\">\n              <b-form-input\n                v-if=\"defaultOptionSelected\"\n                v-model=\"search\"\n                placeholder=\"Search Experiments\"\n                @keydown.native.enter=\"searchExperiments\"\n              />\n              <b-form-select\n                v-if=\"applicationSelected\"\n                v-model=\"applicationSelect\"\n                :options=\"applicationNameOptions\"\n              >\n                <template slot=\"first\">\n                  <option :value=\"null\" disabled>\n                    Select an application to search by\n                  </option>\n                </template>\n              </b-form-select>\n              <b-form-select\n                v-if=\"projectSelected\"\n                v-model=\"projectSelect\"\n                :options=\"projectNameOptions\"\n              >\n                <template slot=\"first\">\n                  <option :value=\"null\" disabled>\n                    Select a project to search by\n                  </option>\n                </template>\n              </b-form-select>\n              <b-form-select\n                v-model=\"experimentAttributeSelect\"\n                @input=\"checkSearchOptions\"\n              >\n                <template slot=\"first\">\n                  <option :value=\"null\" disabled>\n                    Select an attribute to search by\n                  </option>\n                </template>\n                <option value=\"USER_NAME\">User Name</option>\n                <option value=\"EXPERIMENT_NAME\">Experiment Name</option>\n                <option value=\"EXPERIMENT_DESC\">Experiment Description</option>\n                <option value=\"APPLICATION_ID\">Application</option>\n                <option value=\"PROJECT_ID\">Project</option>\n                <option value=\"JOB_ID\">Job Id</option>\n              </b-form-select>\n              <b-form-select v-model=\"experimentStatusSelect\">\n                <template slot=\"first\">\n                  <option :value=\"null\" disabled>\n                    Select an experiment status to filter by\n                  </option>\n                </template>\n                <option value=\"ALL\">ALL</option>\n                <option value=\"CREATED\">Created</option>\n                <option value=\"VALIDATED\">Validated</option>\n                <option value=\"SCHEDULED\">Scheduled</option>\n                <option value=\"LAUNCHED\">Launched</option>\n                <option value=\"EXECUTING\">Executing</option>\n                <option value=\"CANCELED\">Canceled</option>\n                <option value=\"COMPLETED\">Completed</option>\n                <option value=\"FAILED\">Failed</option>\n              </b-form-select>\n              <b-input-group-append>\n                <b-button @click=\"resetSearch\">Reset</b-button>\n                <b-button variant=\"primary\" @click=\"searchExperiments\"\n                  >Search</b-button\n                >\n              </b-input-group-append>\n            </b-input-group>\n            <b-input-group class=\"w-100 mb-2\">\n              <b-input-group-prepend is-text>\n                <i class=\"fa fa-calendar-week\" aria-hidden=\"true\"></i>\n              </b-input-group-prepend>\n              <flat-pickr\n                v-model=\"dateSelect\"\n                :config=\"dateConfig\"\n                placeholder=\"Select a date range to filter by\"\n                @on-change=\"dateRangeChanged\"\n                class=\"form-control\"\n              />\n            </b-input-group>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col\">\n        <div class=\"card\">\n          <div class=\"card-body\">\n            <table class=\"table table-hover\">\n              <thead>\n                <tr>\n                  <th>Name</th>\n                  <th>Application</th>\n                  <th>User</th>\n                  <th>Creation Time</th>\n                  <th>Status</th>\n                  <th>Actions</th>\n                </tr>\n              </thead>\n              <tbody>\n                <tr\n                  v-for=\"experiment in experiments\"\n                  :key=\"experiment.experimentId\"\n                >\n                  <td>\n                    <b-link :href=\"viewLink(experiment)\">{{\n                      experiment.name\n                    }}</b-link>\n                  </td>\n                  <td v-if=\"applicationName(experiment)\">\n                    {{ applicationName(experiment) }}\n                  </td>\n                  <td v-else class=\"font-italic text-muted\">N/A</td>\n                  <td>{{ experiment.userName }}</td>\n                  <td>\n                    <span :title=\"experiment.creationTime\">{{\n                      fromNow(experiment.creationTime)\n                    }}</span>\n                  </td>\n                  <td>\n                    <experiment-status-badge\n                      :statusName=\"experiment.experimentStatus.name\"\n                    />\n                  </td>\n                  <td>\n                    <!-- if we can't load the application for the experiment\n                    (for example, if it was deleted), then user can't edit or\n                    clone experiment -->\n                    <span v-if=\"applicationName(experiment)\">\n                      <b-link\n                        v-if=\"\n                          experiment.isEditable && applicationName(experiment)\n                        \"\n                        :href=\"editLink(experiment)\"\n                        class=\"action-link\"\n                        >Edit\n                        <i class=\"fa fa-edit\" aria-hidden=\"true\"></i>\n                      </b-link>\n                      <b-link\n                        v-else\n                        @click=\"clone(experiment)\"\n                        class=\"action-link\"\n                        >Clone\n                        <i class=\"fa fa-copy\" aria-hidden=\"true\"></i>\n                      </b-link>\n                    </span>\n                  </td>\n                </tr>\n              </tbody>\n            </table>\n            <pager\n              v-bind:paginator=\"experimentsPaginator\"\n              v-on:next=\"nextExperiments\"\n              v-on:previous=\"previousExperiments\"\n            ></pager>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { errors, models, services, utils } from \"django-airavata-api\";\nimport { components as comps } from \"django-airavata-common-ui\";\n\nimport moment from \"moment\";\nimport urls from \"../utils/urls\";\n\nexport default {\n  props: [\"initialExperimentsData\"],\n  name: \"experiment-list-container\",\n  data() {\n    return {\n      experimentsPaginator: null,\n      applicationInterfaces: {},\n      search: null,\n      applicationSelect: null,\n      projectSelect: null,\n      dateSelect: null,\n      experimentAttributeSelect: null,\n      experimentStatusSelect: null,\n      appInterfaces: null,\n      projectInterfaces: null,\n      fromDate: null,\n      toDate: null,\n      applicationSelected: false,\n      projectSelected: false,\n      defaultOptionSelected: true,\n      dateConfig: {\n        mode: \"range\",\n        wrap: true,\n        dateFormat: \"Y-m-d\",\n        maxDate: new Date().fp_incr(1),\n      },\n    };\n  },\n  components: {\n    pager: comps.Pager,\n    \"experiment-status-badge\": comps.ExperimentStatusBadge,\n  },\n  methods: {\n    searchExperiments: function () {\n      this.experimentsPaginator = null;\n      this.reloadExperiments();\n    },\n    resetSearch: function () {\n      this.experimentsPaginator = null;\n      this.search = null;\n      this.experimentAttributeSelect = null;\n      this.experimentStatusSelect = null;\n      this.applicationSelect = null;\n      this.projectSelect = null;\n      this.dateSelect = null;\n      this.toDate = null;\n      this.fromDate = null;\n      this.checkSearchOptions();\n      this.reloadExperiments();\n    },\n    reloadExperiments: function () {\n      const searchParams = {};\n      if (this.experimentAttributeSelect) {\n        if (\n          this.experimentAttributeSelect == \"APPLICATION_ID\" &&\n          this.applicationSelect\n        ) {\n          searchParams[\"APPLICATION_ID\"] = this.applicationSelect;\n        } else if (\n          this.experimentAttributeSelect == \"PROJECT_ID\" &&\n          this.projectSelect\n        ) {\n          searchParams[\"PROJECT_ID\"] = this.projectSelect;\n        } else if (this.search) {\n          searchParams[this.experimentAttributeSelect] = this.search;\n        }\n      }\n      if (this.experimentStatusSelect) {\n        if (this.experimentStatusSelect != \"ALL\") {\n          searchParams[\"STATUS\"] = this.experimentStatusSelect;\n        }\n      }\n      if (this.fromDate && this.toDate) {\n        searchParams[\"FROM_DATE\"] = this.fromDate.getTime();\n        searchParams[\"TO_DATE\"] = this.toDate.getTime();\n      }\n\n      services.ExperimentSearchService.list(searchParams).then(\n        (result) => (this.experimentsPaginator = result)\n      );\n    },\n    checkSearchOptions: function () {\n      this.applicationSelected = false;\n      this.projectSelected = false;\n      this.defaultOptionSelected = false;\n      if (this.experimentAttributeSelect == \"APPLICATION_ID\") {\n        this.applicationSelected = true;\n      } else if (this.experimentAttributeSelect == \"PROJECT_ID\") {\n        this.projectSelected = true;\n      } else {\n        this.defaultOptionSelected = true;\n      }\n    },\n    loadApplicationInterfaces: function () {\n      return services.ApplicationInterfaceService.list().then(\n        (appInterfaces) => (this.appInterfaces = appInterfaces)\n      );\n    },\n    loadProjectInterfaces: function () {\n      return services.ProjectService.listAll().then(\n        (projectInterfaces) => (this.projectInterfaces = projectInterfaces)\n      );\n    },\n    dateRangeChanged: function (selectedDates) {\n      [this.fromDate, this.toDate] = selectedDates;\n      if (this.fromDate && this.toDate) {\n        this.reloadExperiments();\n      }\n    },\n    nextExperiments: function () {\n      this.experimentsPaginator.next();\n    },\n    previousExperiments: function () {\n      this.experimentsPaginator.previous();\n    },\n    fromNow: function (date) {\n      return moment(date).fromNow();\n    },\n    editLink: function (experiment) {\n      return urls.editExperiment(experiment);\n    },\n    viewLink: function (experiment) {\n      return urls.viewExperiment(experiment);\n    },\n    applicationName: function (experiment) {\n      if (experiment.executionId in this.applicationInterfaces) {\n        if (\n          this.applicationInterfaces[experiment.executionId] instanceof\n          models.ApplicationInterfaceDefinition\n        ) {\n          return this.applicationInterfaces[experiment.executionId]\n            .applicationName;\n        } else if (\n          this.applicationInterfaces[experiment.executionId] === null\n        ) {\n          return null;\n        }\n      } else {\n        const request = services.ApplicationInterfaceService.retrieve(\n          {\n            lookup: experiment.executionId,\n          },\n          {\n            ignoreErrors: true,\n          }\n        )\n          .then((result) => {\n            this.$set(\n              this.applicationInterfaces,\n              experiment.executionId,\n              result\n            );\n          })\n          .catch((error) => {\n            if (errors.ErrorUtils.isNotFoundError(error)) {\n              this.$set(\n                this.applicationInterfaces,\n                experiment.executionId,\n                null\n              );\n            } else {\n              throw error;\n            }\n          })\n          .catch(utils.FetchUtils.reportError);\n        this.$set(this.applicationInterfaces, experiment.executionId, request);\n      }\n      return \"...\";\n    },\n    clone(experiment) {\n      services.ExperimentService.clone({\n        lookup: experiment.experimentId,\n      }).then((clonedExperiment) => {\n        urls.navigateToEditExperiment(clonedExperiment);\n      });\n    },\n  },\n  computed: {\n    experiments: function () {\n      return this.experimentsPaginator\n        ? this.experimentsPaginator.results\n        : null;\n    },\n    applicationNameOptions() {\n      if (this.appInterfaces) {\n        const options = this.appInterfaces.map((appInterface) => {\n          return {\n            value: appInterface.applicationInterfaceId,\n            text: appInterface.applicationName,\n          };\n        });\n        return utils.StringUtils.sortIgnoreCase(options, (o) => o.text);\n      } else {\n        return [];\n      }\n    },\n    projectNameOptions() {\n      if (this.projectInterfaces) {\n        const options = this.projectInterfaces.map((projectInterface) => {\n          return {\n            value: projectInterface.projectID,\n            text: projectInterface.name,\n          };\n        });\n        return utils.StringUtils.sortIgnoreCase(options, (o) => o.text);\n      } else {\n        return [];\n      }\n    },\n  },\n  beforeMount: function () {\n    this.loadApplicationInterfaces();\n    this.loadProjectInterfaces();\n    services.ExperimentSearchService.list({\n      initialData: this.initialExperimentsData,\n    }).then((result) => (this.experimentsPaginator = result));\n  },\n};\n</script>\n\n<style></style>\n"]}]}