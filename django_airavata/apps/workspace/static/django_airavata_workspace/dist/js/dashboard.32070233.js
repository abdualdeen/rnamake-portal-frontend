(function(e){function t(t){for(var r,o,s=t[0],l=t[1],c=t[2],p=0,f=[];p<s.length;p++)o=s[p],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&f.push(i[o][0]),i[o]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);u&&u(t);while(f.length)f.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,s=1;s<n.length;s++){var l=n[s];0!==i[l]&&(r=!1)}r&&(a.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},i={dashboard:0},a=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/static/django_airavata_workspace/dist/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=l;a.push([1,"chunk-vendors","chunk-common"]),n()})({1:function(e,t,n){e.exports=n("23ee")},"23ee":function(e,t,n){"use strict";n.r(t);var r=n("d4e1"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("pga-link"),e._m(0),e.showNewUserMessage?n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("b-alert",{attrs:{variant:"info",show:""}},[e._v("Welcome "+e._s(e.userProfile.firstName)+" "+e._s(e.userProfile.lastName)+"! You\n        currently don't have access to run any applications but the\n        administrator of this gateway has been notified and will be in contact\n        to grant you the appropriate privileges.")])],1)]):e._e(),e.favoriteApplicationsData.length>0?[e._m(1),n("div",{staticClass:"row"},e._l(e.favoriteApplicationsData,(function(t){return n("application-card",{key:t.appModule.appModuleId,ref:"favoriteApplicationCards",refInFor:!0,attrs:{appModule:t.appModule,disabled:t.disabled},on:{"app-selected":e.handleAppSelected,favorite:function(n){return e.markFavorite(t.appModule)},unfavorite:function(n){return e.markNotFavorite(t.appModule)}}},[n("favorite-toggle",{staticClass:"card-link",attrs:{slot:"card-actions",favorite:!0},on:{favorite:function(n){return e.markFavorite(t.appModule)},unfavorite:function(n){return e.markNotFavorite(t.appModule)}},slot:"card-actions"})],1)})),1),n("hr")]:e._e(),n("div",{staticClass:"row"},e._l(e.nonFavoriteApplicationsData,(function(t){return n("application-card",{key:t.appModule.appModuleId,attrs:{appModule:t.appModule,disabled:t.disabled},on:{"app-selected":e.handleAppSelected,favorite:function(n){return e.markFavorite(t.appModule)},unfavorite:function(n){return e.markNotFavorite(t.appModule)}}},[n("favorite-toggle",{staticClass:"card-link",attrs:{slot:"card-actions",favorite:!1},on:{favorite:function(n){return e.markFavorite(t.appModule)},unfavorite:function(n){return e.markNotFavorite(t.appModule)}},slot:"card-actions"})],1)})),1)],2)},a=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("h1",{staticClass:"h4 mb-4"},[e._v("Dashboard")]),n("h2",{staticClass:"h6 mb-2 text-uppercase text-muted"},[e._v("Applications")])])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("h1",{staticClass:"h5 mb-2"},[e._v("Favorites")])])])}],o=(n("20d6"),n("ac24")),s=n("ec54"),l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.showPGAUrl?n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("b-alert",{attrs:{variant:"info",show:""}},[e._v("You're using the new portal interface. To switch back to the old\n      interface, go to\n      "),n("b-link",{attrs:{href:e.settings.pgaUrl}},[e._v(e._s(e.settings.pgaUrl))])],1)],1)]):e._e()},c=[],u={name:"pga-url",data:function(){return{settings:null}},computed:{showPGAUrl:function(){return this.settings&&null!=this.settings.pgaUrl}},beforeMount:function(){var e=this;o["c"].SettingsService.get().then((function(t){e.settings=t}))}},p=u,f=n("2877"),d=Object(f["a"])(p,l,c,!1,null,null,null),h=d.exports,v={name:"dashboard-container",data:function(){return{accessibleAppModules:null,userProfile:null,allApplicationModules:null,workspacePreferences:null}},components:{"application-card":r["a"].ApplicationCard,"favorite-toggle":r["a"].FavoriteToggle,"pga-link":h},methods:{handleAppSelected:function(e){s["a"].navigateToCreateExperiment(e)},markFavorite:function(e){var t=this;o["c"].ApplicationModuleService.favorite({lookup:e.appModuleId}).then((function(){return o["c"].WorkspacePreferencesService.get().then((function(e){return t.workspacePreferences=e}))})).then((function(){var n=t.favoriteApplicationsData.findIndex((function(t){return t.appModule.appModuleId===e.appModuleId}));t.$nextTick((function(){t.$refs.favoriteApplicationCards[n].$el.scrollIntoView({behavior:"smooth",block:"center"})}))}))},markNotFavorite:function(e){var t=this;o["c"].ApplicationModuleService.unfavorite({lookup:e.appModuleId}).then((function(){return o["c"].WorkspacePreferencesService.get().then((function(e){return t.workspacePreferences=e}))}))}},computed:{isNewUser:function(){return this.userProfile&&Date.now()-this.userProfile.creationTime.getTime()<6048e5},showNewUserMessage:function(){return this.isNewUser&&this.userProfile&&this.accessibleAppModules&&0===this.accessibleAppModules.length},accessibleModuleIds:function(){return this.accessibleAppModules?this.accessibleAppModules.map((function(e){return e.appModuleId})):[]},allApplicationData:function(){var e=this;return this.allApplicationModules?this.allApplicationModules.map((function(t){return{appModule:t,disabled:e.accessibleModuleIds.indexOf(t.appModuleId)<0}})):[]},favoriteApplicationsData:function(){var e=this;return this.allApplicationData.filter((function(t){return e.favoriteApplicationIds.indexOf(t.appModule.appModuleId)>=0}))},nonFavoriteApplicationsData:function(){var e=this;return this.allApplicationData.filter((function(t){return e.favoriteApplicationIds.indexOf(t.appModule.appModuleId)<0}))},favoriteApplicationIds:function(){return this.workspacePreferences&&this.workspacePreferences.application_preferences?this.workspacePreferences.application_preferences.filter((function(e){return e.favorite})).map((function(e){return e.application_id})):[]}},beforeMount:function(){var e=this;o["c"].ApplicationModuleService.list().then((function(t){return e.accessibleAppModules=t})),o["c"].UserProfileService.retrieve({lookup:o["d"].Session.username}).then((function(t){return e.userProfile=t})),o["c"].ApplicationModuleService.listAll().then((function(t){return e.allApplicationModules=t})),o["c"].WorkspacePreferencesService.get().then((function(t){return e.workspacePreferences=t}))}},m=v,b=Object(f["a"])(m,i,a,!1,null,null,null),g=b.exports,M=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("sidebar",[n("sidebar-header",{attrs:{title:"My Recent Experiments","view-all-url":e.viewAllExperiments}}),n("sidebar-feed",{attrs:{"feed-items":e.feedItems},scopedSlots:e._u([{key:"description",fn:function(t){return[n("experiment-status-badge",{attrs:{"status-name":t.feedItem.statusName}}),t.feedItem.isProgressing?n("i",{staticClass:"fa fa-sync-alt fa-spin ml-1"}):e._e()]}}])})],1)},w=[],A=(n("456d"),n("5df3"),n("ac6a"),n("bd86")),I=(n("7f7f"),{name:"recent-experiments-container",props:{viewAllExperiments:String,username:String},components:{sidebar:r["a"].Sidebar,"sidebar-header":r["a"].SidebarHeader,"sidebar-feed":r["a"].SidebarFeed,"experiment-status-badge":r["a"].ExperimentStatusBadge},created:function(){this.pollExperiments()},methods:{pollExperiments:function(){var e=this;this.loadExperiments().then((function(){setTimeout(function(){this.pollExperiments()}.bind(e),e.refreshDelay)})).catch((function(){}))},loadExperiments:function(){var e=this;return o["c"].ExperimentSearchService.list(Object(A["a"])({limit:5,offset:0},o["b"].ExperimentSearchFields.USER_NAME.name,this.username),{showSpinner:!1,ignoreErrors:!0}).then((function(t){e.feedItems=t.results.map((function(e){return{id:e.experimentId,statusName:e.experimentStatus.name,title:e.name,url:s["a"].viewExperiment(e),timestamp:e.statusUpdateTime,interfaceId:e.executionId,isProgressing:e.convertToExperiment().isProgressing,type:null}}));var n={};e.feedItems.filter((function(t){return!(t.interfaceId in e.applicationInterfaces)})).forEach((function(e){return n[e.interfaceId]=!0})),Promise.all(Object.keys(n).map((function(t){return e.loadApplicationInterface(t)}))).then((function(){e.populateApplicationNames()}))}))},loadApplicationInterface:function(e){var t=this;return o["c"].ApplicationInterfaceService.retrieve({lookup:e},{showSpinner:!1,ignoreErrors:!0}).then((function(n){t.applicationInterfaces[e]=n})).catch((function(n){if(!o["a"].ErrorUtils.isNotFoundError(n))throw n;t.applicationInterfaces[e]=null})).catch(o["e"].FetchUtils.reportError)},populateApplicationNames:function(){var e=this;this.feedItems.filter((function(e){return null===e.type})).forEach((function(t){t.interfaceId in e.applicationInterfaces&&e.applicationInterfaces[t.interfaceId]&&(t.type=e.applicationInterfaces[t.interfaceId].applicationName)}))}},data:function(){return{feedItems:null,applicationInterfaces:{},refreshDelay:1e4}}}),k=I,x=Object(f["a"])(k,M,w,!1,null,null,null),_=x.exports;Object(r["b"])((function(e){new e({render:function(e){return e(r["a"].MainLayout,[e(g),e(_,{props:{viewAllExperiments:this.viewAllExperiments,username:this.username},slot:"sidebar"})])},data:function(){return{viewAllExperiments:null,username:null}},beforeMount:function(){this.viewAllExperiments=this.$el.dataset.viewAllExperiments,this.username=this.$el.dataset.username}}).$mount("#dashboard")}))}});
//# sourceMappingURL=dashboard.32070233.js.map